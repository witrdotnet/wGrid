<html>
	<head>
		<link rel="stylesheet" type="text/css" href="wGrid.css" /> 
		<script charset="utf-8" src="./prototype.js" type="text/javascript"></script>	
		<script charset="utf-8" src="./scriptaculous.js" type="text/javascript"></script>	
		<script charset="utf-8" src="./wGrid.js" type="text/javascript"></script>	
	</head>
	<body>
		<input type=text id='filterColsText' /> <br/>
		<input type=text id='filterRowsText' /> <br/>
	
		<div id ='cont'></div>
		<script language = "javascript">
			function getRandomName(){
				name = '';
				for(j=0; j<5; j++){
					var randomnumber=Math.floor(Math.random()*25)+65
					name = name + String.fromCharCode(randomnumber);
				}
				return name;
			}
			
			function getRandomInt(min,max){
				return Math.floor(Math.random()*(max-min))+min;
			}

		
			minColsListsCount = 1;
			maxColsListsCount = 1;
			
			minRowsListsCount = 1;
			maxRowsListsCount = 1;
			
			minValuesInLists = 50;
			maxValuesInLists = 50;
			
			minColsValuesCount = 0;
			maxColsValuesCount = 0;
			
			minRowsValuesCount = 0;
			maxRowsValuesCount = 0;
			
			disValuesCount = 100
			
			visibleCols = 8;
			visibleRows = 10;
		
			var colsList = new Array();
			var rowsList = new Array();
			var disabledValuesList = new Array();
			
			// append cols lists
			colsListsCount = getRandomInt(minColsListsCount, maxColsListsCount);
			valId = 0;
			for(i =1; i<=colsListsCount;i++) {
				valuesList = new Array();
				valuesListCount = getRandomInt(minValuesInLists,maxValuesInLists);
				for(v =1; v<=valuesListCount;v++) {
					valId++;
					valueName = getRandomName();
					valuesList.push({type:'VALUE', key:valId, name:valueName +"("+valId+")"});					
				}			
				listName = getRandomName();
				colsList.push({type:'LIST', key:i, name:listName +"("+i+")", elements : valuesList, collapsed:false});
			}
			
			// append cols values(without lists)
			colsValuesCount = getRandomInt(minColsValuesCount, maxColsValuesCount);
			for(v =1; v<=colsValuesCount;v++) {
				valId++;
				valueName = getRandomName();
				colsList.push({type:'VALUE', key:valId, name:valueName +"("+valId+")"});					
			}			
			
			// memorize max col id 
			maxColId = valId;
			
			// append rows lists
			rowsListsCount = getRandomInt(minRowsListsCount, maxRowsListsCount);
			valId = 0;
			for(i =1; i<=rowsListsCount;i++) {
				valuesList2 = new Array();
				valuesListCount = getRandomInt(minValuesInLists,maxValuesInLists);				
				for(v =1; v<=valuesListCount;v++) {
					valId++;
					valueName = getRandomName();
					valuesList2.push({type:'VALUE', key:valId, name:valueName +"("+valId+")"});					
				}			
				listName = getRandomName();
				rowsList.push({type:'LIST', key:i, name:listName +"("+i+")", elements : valuesList2, collapsed:false});
			}
			
			// append rows values(without lists)
			rowsValuesCount = getRandomInt(minRowsValuesCount,maxRowsValuesCount);
			for(v =1; v<=rowsValuesCount;v++) {
				valId++;
				valueName = getRandomName();
				rowsList.push({type:'VALUE', key:valId, name:valueName +"("+valId+")"});					
			}			
			
			// memorize max row id 
			maxRowId = valId;
			
			// disabled values			
			for(d=1; d<=disValuesCount;d++){
				disColId = getRandomInt(1,maxColId);
				disRowId = getRandomInt(1,maxRowId);
				disabledValuesList.push({colId : disColId, rowId : disRowId});
			}
			
			grid = new WGrid('cont',{
									data : {cols:colsList, rows:rowsList},
									disabledValues: disabledValuesList,
									grid:{visibleColsCount:visibleCols,visibleRowsCount:visibleRows}									
									}
								);
			evtText = false;
			Event.observe($('filterColsText'), 'keyup', function(event){ 				
				grid.filterCols(event.target.value);
				evtText = true;				
			});
			Event.observe($('filterRowsText'), 'keyup', function(event){ 				
				grid.filterRows(event.target.value);
				evtText = true;				
			});
			Event.observe(document, 'keydown', function(event){ 				
				if(!evtText){
					if(event.keyCode == Event.KEY_RIGHT) grid.shiftRight();
					if(event.keyCode == Event.KEY_LEFT) grid.shiftLeft();
					if(event.keyCode == Event.KEY_UP) grid.shiftTop();
					if(event.keyCode == Event.KEY_DOWN) grid.shiftBottom();
				}else{
					evtText = false;
				}
			});
			
		</script>
		
	</body>
</html>